@import "tailwindcss";

:root {
  --background: #0f172a;
  --foreground: #e2e8f0;
  --accent: #8B7355;
  --grid-empty: #1e293b;
  --grid-border: #334155;
  --glow-house: 76, 175, 80;
  --glow-lumber: 139, 105, 20;
  --glow-quarry: 112, 128, 144;
  --glow-market: 255, 193, 7;
  --glow-townhall: 66, 165, 245;
  --glow-park: 67, 160, 71;
  --glow-factory: 255, 152, 0;
  --glow-cathedral: 171, 71, 188;
  --glow-harbor: 38, 166, 154;
  --glow-road: 120, 120, 120;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: system-ui, -apple-system, sans-serif;
  --font-mono: ui-monospace, monospace;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
  overflow: hidden;
  -webkit-overflow-scrolling: touch;
}

/* Safe area padding for mobile */
.pb-safe {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

/* ============================================================
   ANIMATIONS
   ============================================================ */

/* Building placement - bounce in */
@keyframes building-place {
  0% { transform: scale(0) rotate(-10deg); opacity: 0; }
  50% { transform: scale(1.3) rotate(3deg); opacity: 1; }
  70% { transform: scale(0.9) rotate(-1deg); }
  100% { transform: scale(1) rotate(0deg); }
}

.animate-building-place {
  animation: building-place 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Upgrade sparkle */
@keyframes upgrade-sparkle {
  0% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.8); filter: brightness(1); }
  30% { box-shadow: 0 0 20px 8px rgba(255, 215, 0, 0.5); filter: brightness(1.5); }
  60% { box-shadow: 0 0 10px 4px rgba(255, 215, 0, 0.2); filter: brightness(1.2); }
  100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); filter: brightness(1); }
}

.animate-upgrade {
  animation: upgrade-sparkle 0.8s ease-out;
}

/* Floating resource numbers */
@keyframes float-up {
  0% { opacity: 1; transform: translateY(0) scale(1); }
  60% { opacity: 0.8; transform: translateY(-20px) scale(1.1); }
  100% { opacity: 0; transform: translateY(-40px) scale(0.8); }
}

.animate-float-up {
  animation: float-up 1.5s ease-out forwards;
  pointer-events: none;
}

/* Ambient smoke for lumber mills and factories */
@keyframes smoke {
  0% { opacity: 0.4; transform: translateY(0) translateX(0) scale(0.5); }
  50% { opacity: 0.2; transform: translateY(-6px) translateX(2px) scale(0.8); }
  100% { opacity: 0; transform: translateY(-12px) translateX(-1px) scale(1.1); }
}

.animate-smoke::after {
  content: '';
  position: absolute;
  top: 2px;
  right: 4px;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(200, 200, 200, 0.5);
  animation: smoke 2.5s ease-out infinite;
  pointer-events: none;
}

/* Tree sway for parks */
@keyframes tree-sway {
  0%, 100% { transform: rotate(-2deg) scale(1); }
  25% { transform: rotate(1deg) scale(1.02); }
  50% { transform: rotate(2deg) scale(1); }
  75% { transform: rotate(-1deg) scale(0.98); }
}

.animate-tree-sway {
  animation: tree-sway 4s ease-in-out infinite;
  transform-origin: bottom center;
}

/* Pulse glow for buildings */
@keyframes pulse-glow {
  0%, 100% { box-shadow: inset 0 0 8px rgba(var(--cell-glow), 0.15), 0 0 4px rgba(var(--cell-glow), 0.1); }
  50% { box-shadow: inset 0 0 12px rgba(var(--cell-glow), 0.3), 0 0 8px rgba(var(--cell-glow), 0.2); }
}

.animate-glow {
  animation: pulse-glow 3s ease-in-out infinite;
}

/* Market shimmer */
@keyframes shimmer {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

.animate-shimmer::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.08) 50%, transparent 100%);
  background-size: 200% 100%;
  animation: shimmer 3s linear infinite;
  pointer-events: none;
  border-radius: inherit;
}

/* Tick pulse on resource bar */
@keyframes tick-pulse {
  0% { background-color: rgba(34, 197, 94, 0.4); }
  100% { background-color: transparent; }
}

.animate-tick-pulse {
  animation: tick-pulse 1s ease-out;
}

/* Toast notification */
@keyframes toast-in {
  0% { transform: translateX(120%); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
}

@keyframes toast-out {
  0% { transform: translateX(0); opacity: 1; }
  100% { transform: translateX(120%); opacity: 0; }
}

.animate-toast-in {
  animation: toast-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.animate-toast-out {
  animation: toast-out 0.3s ease-in forwards;
}

/* Era transition */
@keyframes era-announce {
  0% { opacity: 0; transform: scale(0.5); }
  30% { opacity: 1; transform: scale(1.1); }
  50% { transform: scale(1); }
  80% { opacity: 1; }
  100% { opacity: 0; transform: scale(1.2); }
}

.animate-era-announce {
  animation: era-announce 3s ease-out forwards;
}

/* Milestone achieved */
@keyframes milestone-pop {
  0% { transform: scale(0) rotate(-180deg); opacity: 0; }
  60% { transform: scale(1.2) rotate(10deg); opacity: 1; }
  80% { transform: scale(0.9) rotate(-5deg); }
  100% { transform: scale(1) rotate(0deg); opacity: 1; }
}

.animate-milestone {
  animation: milestone-pop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Bottom sheet animation */
@keyframes slide-up {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

.animate-slide-up {
  animation: slide-up 0.25s ease-out;
}

/* Event banner */
@keyframes event-pulse {
  0%, 100% { opacity: 0.9; }
  50% { opacity: 1; }
}

.animate-event-banner {
  animation: event-pulse 2s ease-in-out infinite;
}

/* Waterfront shimmer for harbor */
@keyframes water-shimmer {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.animate-water::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #1565C0, #42A5F5, #1565C0);
  background-size: 200% 100%;
  animation: water-shimmer 3s ease-in-out infinite;
  pointer-events: none;
}

/* Star twinkle for cathedral */
@keyframes star-twinkle {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.9; }
}

.animate-stars::after {
  content: 'âœ¦';
  position: absolute;
  top: 2px;
  left: 3px;
  font-size: 6px;
  color: rgba(255, 215, 0, 0.7);
  animation: star-twinkle 2s ease-in-out infinite;
  pointer-events: none;
}

/* Road connection dots */
@keyframes road-pulse {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.7; }
}

/* Mini-map ping */
@keyframes minimap-ping {
  0% { transform: scale(1); opacity: 1; }
  100% { transform: scale(2); opacity: 0; }
}

/* ============================================================
   BUILDING CELL STYLES
   ============================================================ */

.cell-empty {
  background: linear-gradient(145deg, #1e293b 0%, #0f172a 100%);
  border-color: #1e3a5f;
}

.cell-house {
  --cell-glow: var(--glow-house);
  background: linear-gradient(145deg, #2d5a3d 0%, #1a3a28 100%);
  border-color: #4a7c59;
}

.cell-house-2 { background: linear-gradient(145deg, #357a4a 0%, #1e4a30 100%); }
.cell-house-3 { background: linear-gradient(145deg, #3d8a52 0%, #246838 100%); }
.cell-house-4 { background: linear-gradient(145deg, #459a5c 0%, #2a7a40 100%); }
.cell-house-5 { background: linear-gradient(145deg, #4daa66 0%, #308a48 100%); }

.cell-lumbermill {
  --cell-glow: var(--glow-lumber);
  background: linear-gradient(145deg, #5a4210 0%, #3d2d08 100%);
  border-color: #8B6914;
}

.cell-lumbermill-2 { background: linear-gradient(145deg, #6a5015 0%, #4a350a 100%); }
.cell-lumbermill-3 { background: linear-gradient(145deg, #7a5e1a 0%, #573d0d 100%); }
.cell-lumbermill-4 { background: linear-gradient(145deg, #8a6c1f 0%, #644510 100%); }
.cell-lumbermill-5 { background: linear-gradient(145deg, #9a7a24 0%, #714d13 100%); }

.cell-quarry {
  --cell-glow: var(--glow-quarry);
  background: linear-gradient(145deg, #4a5568 0%, #2d3748 100%);
  border-color: #708090;
}

.cell-quarry-2 { background: linear-gradient(145deg, #546478 0%, #354252 100%); }
.cell-quarry-3 { background: linear-gradient(145deg, #5e7088 0%, #3d4d5c 100%); }
.cell-quarry-4 { background: linear-gradient(145deg, #687c98 0%, #455866 100%); }
.cell-quarry-5 { background: linear-gradient(145deg, #7288a8 0%, #4d6370 100%); }

.cell-market {
  --cell-glow: var(--glow-market);
  background: linear-gradient(145deg, #7a5f08 0%, #5a4506 100%);
  border-color: #b8860b;
}

.cell-market-2 { background: linear-gradient(145deg, #8a6f0d 0%, #6a5508 100%); }
.cell-market-3 { background: linear-gradient(145deg, #9a7f12 0%, #7a650a 100%); }

.cell-townhall {
  --cell-glow: var(--glow-townhall);
  background: linear-gradient(145deg, #2a4a8a 0%, #1a3060 100%);
  border-color: #4169e1;
}

.cell-townhall-2 { background: linear-gradient(145deg, #345aa0 0%, #1e3870 100%); }
.cell-townhall-3 { background: linear-gradient(145deg, #3e6ab6 0%, #224080 100%); }

.cell-park {
  --cell-glow: var(--glow-park);
  background: linear-gradient(145deg, #1a5a1a 0%, #0d3d0d 100%);
  border-color: #228B22;
}

.cell-park-2 { background: linear-gradient(145deg, #207020 0%, #104a10 100%); }
.cell-park-3 { background: linear-gradient(145deg, #268626 0%, #135713 100%); }

.cell-factory {
  --cell-glow: var(--glow-factory);
  background: linear-gradient(145deg, #7a4a10 0%, #5a3008 100%);
  border-color: #E65100;
}

.cell-factory-2 { background: linear-gradient(145deg, #8a5815 0%, #6a380a 100%); }
.cell-factory-3 { background: linear-gradient(145deg, #9a6620 0%, #7a400d 100%); }

.cell-cathedral {
  --cell-glow: var(--glow-cathedral);
  background: linear-gradient(145deg, #5a2a6a 0%, #3a1848 100%);
  border-color: #9C27B0;
}

.cell-cathedral-2 { background: linear-gradient(145deg, #6a3480 0%, #442058 100%); }
.cell-cathedral-3 { background: linear-gradient(145deg, #7a3e96 0%, #4e2868 100%); }

.cell-harbor {
  --cell-glow: var(--glow-harbor);
  background: linear-gradient(145deg, #1a4a4a 0%, #0d3030 100%);
  border-color: #00897B;
}

.cell-harbor-2 { background: linear-gradient(145deg, #205a5a 0%, #103a3a 100%); }
.cell-harbor-3 { background: linear-gradient(145deg, #266a6a 0%, #134444 100%); }

.cell-road {
  --cell-glow: var(--glow-road);
  background: linear-gradient(145deg, #3a3a3a 0%, #2a2a2a 100%);
  border-color: #555;
}

/* ============================================================
   LEVEL BADGE STYLES
   ============================================================ */

.level-badge {
  position: absolute;
  bottom: 1px;
  right: 2px;
  font-size: 7px;
  font-weight: 800;
  line-height: 1;
  text-shadow: 0 0 3px rgba(0,0,0,0.8);
}

.level-1 { color: #a0aec0; }
.level-2 { color: #68d391; }
.level-3 { color: #4fc3f7; }
.level-4 { color: #f6ad55; }
.level-5 { color: #fc8181; text-shadow: 0 0 6px rgba(252, 129, 129, 0.5); }

/* ============================================================
   OWNERSHIP INDICATOR
   ============================================================ */

.cell-owned::before {
  content: '';
  position: absolute;
  top: 1px;
  left: 1px;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: #60a5fa;
  opacity: 0.7;
  pointer-events: none;
}

/* ============================================================
   DISTRICT OVERLAY
   ============================================================ */

.cell-district-residential { border-color: rgba(76, 175, 80, 0.6) !important; }
.cell-district-industrial { border-color: rgba(255, 152, 0, 0.6) !important; }
.cell-district-commercial { border-color: rgba(255, 193, 7, 0.6) !important; }
.cell-district-government { border-color: rgba(66, 165, 245, 0.6) !important; }

/* ============================================================
   CUSTOM SCROLLBAR
   ============================================================ */

::-webkit-scrollbar {
  width: 4px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #334155;
  border-radius: 2px;
}

/* ============================================================
   UTILITY
   ============================================================ */

.text-shadow-glow {
  text-shadow: 0 0 10px currentColor;
}
